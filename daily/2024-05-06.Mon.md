# HTTP란?

- 클라이언트와 서버간 데이터 전송시의 약속
- HTML, 이미지, 영상, 데이터 등 모든 것들을 전송할 수 있다.
- 서버간 데이터 전송도 HTTP를 사용한다.

# HTTP를 사용하는 이유, 특징

<aside>
💡 HTTP 특징

- 클라이언트 - 서버 구조
- 무상태 프로토콜, 상태유지 x(Unstateful)
- 비연결성
- HTTP 메세지
- 단순함
</aside>

## 클라이언트 - 서버 구조

클라이언트에서 요청하면 서버에서 응답하는 구조

장점 

- 클라이언트와 서버 각각의 임무에 집중할 수 있다.
- 클라이언트 - UX, UI 개선, 서버 - 데이터 처리

## 무상태 프로토콜, 유지 (Unstateful)

상태 프로토콜과 비교해서 보자.

### 상태 프로토콜과 무상태 프로토콜

클라이언트 정보를 서버가 유지하고 있느냐 없느냐에 따라 나뉜다.

클라이언트 정보를 유지한다 ⇒ 상태 프로토콜

<aside>
💡 상태 프로토콜 예시

- 영화관에서 B직원이 A 고객을 응대한다.
- A : 범죄도시 4 주세요.
- B : 자리는 어디로 하시겠어요?
- (그사이 B가 잠시 매점을 도우러가서 직원 C가 왔다.)
- A : H10 으로 주세요.
- C : ?? 어떤 영화라고 하셨죠???
</aside>

클라이언트의 정보를 유지하지 않는다. ⇒ 무상태 프로토콜

<aside>
💡 무상태 프로토콜 예시

- 영화관에서 B직원이 A 고객을 응대한다. 현재 바쁜상황
- A : 아바타 주세요.
- B : 자리는 어디로 하시겠어요?
- (그사이 B가 잠시 매점을 도우러가서 직원 C가 왔다.)
- A : 아바타, H10으로 주세요.
- C : 네 20000원 입니다.
</aside>

예시에서 B,C 직원을 각각 서버 컴퓨터 B, C라고 생각해보자.

상태 프로토콜의 경우, B 컴퓨터가 A고객의 정보를 알고 있다. 하지만, B컴퓨터에 이상이 생겨 C컴퓨터와 연결이 되면, C컴퓨터는 A고객에 대한 정보가 없어 대응할 수가 없다. 

무상태 프로토콜의 경우, B컴퓨터가 A고객의 정보를 모르고 있다. B컴퓨터에 이상이 생기더라도 고객이 정보를 줌으로써 C컴퓨터는 적절한 데이터를 제공할 수 있다.

중간 정리하자면,

**상태 프로토콜** : 중간에 다른 직원으로 **바뀌면 안된다.**

**무상태 프로토콜** : 중간에 다른 직원으로 바뀌어도 된다. → **무한 서버 증설이 가능하다.**

하지만, 상태 프로토콜을 사용해야 하는 경우도 있는데, **로그인**이 바로 그 예시이다.

한번 로그인한 경우, 그 정보를 서버는 갖고 있어야한다. 하지만 상태 유지보다는 무상태를 선호하기에 최소화해야한다. **로그인의 경우, 쿠키나 세션을 이용하여 상태 유지를 최소화한다.** 

## 비연결성

만약, 클라이언트 컴퓨터 3대 모두 사용하지 않더라도 한 서버에 연결되어있는 상태가 지속된다면, 서버 자원 낭비가 발생한다.

HTTP는 비연결성을 통해 서버 자원 소모를 최소화한다.

하지만, 단점이 있다.

- 매번 TCP/IP 연결을 새로 맺어야한다. → 3-way Handshaking 으로 인한 시간 추가
- 추가적인 자바스크립트, CSS, 이미지 파일을 불러와야한다.

지금은 HTTP 지속 연결로 해결함.

## HTTP 메세지

### 요청 메시지

<aside>
💡 요청메시지 양식

GET /search?q=hoho&hl=ko HTTP/1.1 ← 시작라인

Host: [www.google.com](http://www.google.com) ← 헤더

</aside>

### 응답 메시지

<aside>
💡 응답 메시지

HTTP/1.1 200 OK  ← 시작라인

Content-Type: text/html;charset=UTF-8 ← 헤더

Content-Length: 3423

<<공백라인>>

message body

</aside>

# 도메인과 웹으로 나눈 이유

- 도메인은 화면, 기술, 인프라를 제외한 핵심 기술 영역이다. 고로 어딘가에 의존해서 쉽게 바뀌면 안된다.
- 그래서 웹을 따로 구분했다. 웹은 다른 기술로 바뀌었을 때 변경되는 영역이다. web을 이용하면 다른 기술로 변경 시 domain은 건드리지 않아도 된다.
- 이렇게 하려면,
    - 도메인은 웹에 의존해서는 안된다.
    - 웹은 도메인에 의존해도 된다.
    - 예를 들어, web을 모두 삭제해도 도메인은 정상 작동 해야한다.
- Item 도메인을 domain과 등록과 변경 폼이 담긴 web으로 패키지를 나누었다.
    
    <img width="243" alt="1" src="https://github.com/devhoody/TIL/assets/124743189/b21d550a-ad21-4466-9814-f3611588aae4">
    